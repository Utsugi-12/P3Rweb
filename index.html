<!DOCTYPE html>
<html>

<head>
	<meta charset="utf-8" />
	<title></title>
	<link rel="stylesheet" href="css/style.css" />
	<style>
		body,
		html {
			padding: 0;
			margin: 0;
			font-family: Arial, sans-serif;
			display: block;
			overflow: hidden;
			/* 防止出现双滚动条 */
		}


		/* 滚动容器 */
		.scroll-container {
			height: 100vh;
			overflow-y: auto;
			scroll-behavior: smooth;
			scroll-snap-type: y mandatory;
			/* 启用垂直滚动捕捉 */
		}

		/* 页面内容区域样式 */
		.section {
			height: 100vh;
			display: flex;
			justify-content: center;
			align-items: center;
			font-size: 24px;
			color: white;
			text-align: center;
			scroll-snap-align: start;
			/* 使页面对齐到视口顶部 */
			position: relative;
			/* 添加相对定位 */
		}

		.home-section {
			position: relative;
		}

		.startwaves {
			position: absolute;
			display: flex;
			justify-content: center;
			height: 120vh;
			width: 100%;
			background-color: #469ce5;
			transform: translateY(-10vh);
			animation-name: down;
			animation-duration: 3s;
			animation-delay: 1s;
			animation-timing-function: ease-out;
			z-index: 1;
			/* 调整层级 */
		}

		@keyframes down {
			0% {
				transform: translateY(-10vh);
			}

			100% {
				transform: translateY(110vh);
			}
		}

		.waves {
			display: block;
			position: absolute;
			bottom: 120vh;
			width: 100%;
			z-index: 2;
			/* 调整层级 */
		}

		#videobg {
			width: 100%;
			height: 100%;
			position: absolute;
			/* 绝对喵 */
		}

		.videos {
			width: 100%;
			height: 100%;
			object-fit: cover;
			position: absolute;
		}

		#centertext {
			position: absolute;
			left: 50%;
			top: 50%;
			transform: translate(-50%, -50%);
			text-align: center;
			animation-name: out;
			animation-duration: 1.5s;
			animation-delay: 3s;
			animation-fill-mode: forwards;
		}

		@keyframes out {
			100% {
				opacity: 0;
				display: none;
			}
		}

		@keyframes in {
			100% {
				opacity: 1;
			}
		}

		#p3rlogo {
			position: absolute;
			right: 12%;
			top: 50%;
			opacity: 0;
			transform: translateY(-50%);
			animation-name: in;
			animation-duration: 1.5s;
			animation-delay: 5s;
			animation-iteration-count: 1;
			animation-fill-mode: forwards;
		}

		/* 背景喵 */
		.characters-section {
			background: url('img/aigis.jpg') center/cover no-repeat;
			opacity: 0.8;
			transition: opacity 0.3s ease, transform 0.3s ease;
		}

		.characters-section:hover {
			opacity: 1;
			transform: scale(1.05);
		}

		.story-section {
			background: url('img/女主.jpg') center/cover no-repeat;
			opacity: 0.8;
			transition: opacity 0.3s ease, transform 0.3s ease;
		}

		.story-section:hover {
			opacity: 1;
			transform: scale(1.05);
		}

		.world-section {
			background: url('img/油咖喱酱.jpg') center/cover no-repeat;
			opacity: 0.8;
			transition: opacity 0.3s ease, transform 0.3s ease;
		}

		.world-section:hover {
			opacity: 1;
			transform: scale(1.05);
		}

		.media-section {
			background: url('img/学姐.jpg') center/cover no-repeat;
			opacity: 0.8;
			transition: opacity 0.3s ease, transform 0.3s ease;
		}

		.media-section:hover {
			opacity: 1;
			transform: scale(1.05);
		}
	</style>
</head>

<body>
	<!-- 滚动容器 -->
	<div class="scroll-container">
		<!-- 导航栏 -->
		<nav class="navbar">
			<ul>
				<li><a href="#home">首页</a></li>
				<li><a href="#characters">角色介绍</a></li>
				<li><a href="#story">故事介绍</a></li>
				<li><a href="#world">世界观</a></li>
				<li><a href="#media">媒体资料</a></li>
			</ul>
		</nav>

		<!-- 首页动画部分 -->
		<div class="startwaves" id="downout">
			<div class="waves">
				<img src="img/waves/wave-1.svg" />
				<img src="img/waves/wave-2.svg" />
				<img src="img/waves/wave-3.svg" />
				<img src="img/waves/wave-4.svg" />
				<img src="img/waves/wave-5.svg" id="shape" />
			</div>
		</div>
		<div id="videobg">
			<video id="video2" class="videos" muted="muted" loop>
				<source src="assset/fv_movie2.mp4">
			</video>
			<video id="video1" class="videos" muted="muted">
				<source src="assset/fv_movie1.mp4">
			</video>
			<div id="centertext">
				<h1>Memento Mori</h1>
				<p>Remember, You Will Die.<br />Time never waits.<br />It delivers all equally to the same end.</p>
			</div>
			<img id="p3rlogo" src="img/P3RE.svg" alt="" />
		</div>


		<!-- 页面内容区域 -->
		<div id="home" class="section home-section">
			<!-- 首页-->
		</div>

		<div id="characters" class="section characters-section">
			<div style="width: 100%; padding: 0 20%; box-sizing: border-box;">
				<h2><a href="characters.html" style="color:rgb(255, 255, 255); text-decoration: none;">角色介绍</a>
				</h2>

			</div>
		</div>

		<div id="story" class="section story-section">
			<div style="width: 100%; padding: 0 20%; box-sizing: border-box;">
				<h2><a href="story.html" style="color: inherit; text-decoration: none;">故事介绍</a></h2>

			</div>
		</div>

		<div id="world" class="section world-section">
			<div style="width: 100%; padding: 0 20%; box-sizing: border-box;">
				<h2><a href="story.html" style="color: inherit; text-decoration: none;">世界观</a></h2>

			</div>
		</div>

		<div id="media" class="section media-section">
			<div style="width: 100%; padding: 0 20%; box-sizing: border-box;">
				<h2><a href="media.html" style="color: inherit; text-decoration: none;">媒体资料</a></h2>

			</div>
		</div>
	</div>


	<script>// JS部分喵

		var downwave = document.getElementById('downout');

		// 添加动画结束事件监听器
		downwave.addEventListener('animationend', function () {
			// 在动画结束后执行你的操作，比如改变元素属性
			downwave.style.display = 'none'
			var video1 = document.getElementById("video1");
			var video2 = document.getElementById("video2");
			video1.play();
			video1.addEventListener('ended', function () {
				// 在视频播放结束时执行你的操作
				//alert('视频播放结束！');
				video1.style.display = 'none'
				video2.play();
			});
		});

		// 点击事件喵
		document.querySelectorAll('a[href^="#"]').forEach(anchor => {
			anchor.addEventListener('click', function (e) {
				e.preventDefault();

				const targetId = this.getAttribute('href');
				const targetSection = document.querySelector(targetId);

				if (targetSection) {
					// 计算目标位置（考虑导航栏高度）
					const offsetTop = targetSection.offsetTop - document.querySelector('.navbar').offsetHeight;

					// 修改滚动目标为滚动容器
					const scrollContainer = document.querySelector('.scroll-container');
					scrollContainer.scrollTo({
						top: offsetTop,
						behavior: 'smooth'
					});
				}
			});
		});

		// 监听滚轮事件实现滚动吸附
		let isScrolling = false;
		const scrollContainer = document.querySelector('.scroll-container');

		scrollContainer.addEventListener('wheel', function (e) {
			if (isScrolling) {
				e.preventDefault();
				e.stopPropagation();
				return;
			}

			isScrolling = true;
			e.preventDefault();

			// 根据滚动方向决定滚动到上一页还是下一页
			const scrollDirection = e.deltaY > 0 ? 1 : -1;//确定滚动方向
			const currentScrollTop = scrollContainer.scrollTop;
			const windowHeight = window.innerHeight;
			const currentSectionIndex = Math.round(currentScrollTop / windowHeight);
			let targetSectionIndex = currentSectionIndex + scrollDirection;

			// 确保目标索引在有效范围内
			targetSectionIndex = Math.max(0, Math.min(targetSectionIndex, 4)); // 0-4对应5个section

			scrollContainer.scrollTo({
				top: targetSectionIndex * windowHeight,
				behavior: 'smooth'
			});

			// 设置延时重置滚动状态
			setTimeout(() => {
				isScrolling = false;
			}, 800); // 与滚动动画时间匹配
		}, { passive: false }); // 添加 passive: false 以允许 preventDefault
	</script>

</body>

</html>